"use client";
import Link from "next/link";
import Script from "next/script";
import Zoho from "./Zoho";
import { useEffect, useState } from "react";
import { getDomainRedirection } from "@/app/utils";

const StickyButtons = () => {
  const [floatD, setFloatD] = useState<any>(null);
  const onClick = () => {
    document.getElementById("zoho-trigger")?.click();
  };

  const getFloatData = async () => {
    const page = await fetch(
      `${process.env.CMS_URL}/api/globals/futura-floating-menu`,
      {
        cache: "no-store",
      }
    );

    const req = await Promise.all([page]);

    return await req[0].json();
  };

  useEffect(() => {
    const load = async () => {
      const float = await getFloatData();
      setFloatD(float);
    };
    load();
  }, []);

  return (
    <div className="fixed bottom-10 right-0 z-[999] flex gap-x-2 md:right-10">
      {floatD && (
        <>
          <Link
            href={
              getDomainRedirection(
                window.location.origin,
                floatD?.HomeCalculator.homeCalculatorLink
              ) as string
            }
            target="_blank"
            className="jusity-center flex h-14 w-14 items-center rounded-full border-[3px] border-[#D21513] bg-white"
          >
            <svg
              width="30"
              height="28"
              viewBox="0 0 30 28"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              className="m-auto"
            >
              <path
                d="M6.47061 0.737516C6.29254 0.883204 6.10639 1.12602 6.04164 1.26361C5.9607 1.46596 5.93642 2.06489 5.93642 3.59462V5.65853C1.71956 5.699 1.56578 5.70709 1.35535 5.86087C1.24203 5.9499 1.06397 6.12797 0.966844 6.24937C0.837344 6.42743 0.796875 6.5974 0.796875 6.95353C0.796875 7.30966 0.837344 7.47962 0.966844 7.65769C1.06397 7.77909 1.24203 7.95716 1.35535 8.04619C1.56578 8.19997 1.71956 8.20806 3.75919 8.22425L5.93642 8.24853C5.97689 12.5059 5.98498 12.6192 6.14686 12.8377C6.24398 12.9591 6.42204 13.1372 6.53536 13.2262C6.69723 13.3476 6.88339 13.3881 7.23142 13.3881C7.57945 13.3881 7.76561 13.3476 7.92749 13.2262C8.0408 13.1372 8.21886 12.9591 8.31599 12.8377C8.47786 12.6192 8.48596 12.5059 8.51024 10.4258L8.52642 8.24853C12.7433 8.20806 12.8971 8.19997 13.1075 8.04619C13.2208 7.95716 13.3989 7.77909 13.496 7.65769C13.6255 7.47962 13.666 7.30966 13.666 6.95353C13.666 6.5974 13.6255 6.42743 13.496 6.24937C13.3989 6.12797 13.2208 5.9499 13.1075 5.86087C12.8971 5.70709 12.7433 5.699 10.7036 5.67471L8.52642 5.65853C8.52642 2.06489 8.50214 1.46596 8.4212 1.26361C8.35645 1.12602 8.1703 0.883204 7.99223 0.737516C7.71705 0.51089 7.61183 0.478516 7.23142 0.478516C6.85101 0.478516 6.7458 0.51089 6.47061 0.737516ZM17.033 5.77184C16.8792 5.8285 16.6688 5.99037 16.5635 6.13606C16.4664 6.27365 16.3531 6.50837 16.3288 6.64597C16.3045 6.79165 16.3045 7.05065 16.3288 7.21253C16.3531 7.39869 16.4826 7.6415 16.6445 7.81147C16.7821 7.96525 17.033 8.13522 17.1868 8.17569C17.3648 8.22425 19.5663 8.24853 22.9495 8.23235C28.2752 8.20806 28.429 8.19997 28.6475 8.04619C28.7608 7.95716 28.9389 7.77909 29.036 7.65769C29.1655 7.47962 29.206 7.30966 29.206 6.95353C29.206 6.5974 29.1655 6.42743 29.036 6.24937C28.9389 6.12797 28.7608 5.9499 28.6475 5.86087C28.429 5.70709 28.2833 5.699 22.8686 5.68281C18.3846 5.66662 17.2515 5.68281 17.033 5.77184ZM2.80413 17.4754C2.60988 17.5645 2.38325 17.7506 2.29422 17.8963C2.20519 18.042 2.10807 18.2767 2.08378 18.4062C2.0595 18.5357 2.07569 18.7947 2.13235 18.9728C2.21328 19.2237 2.5775 19.6446 3.82394 20.8991L5.41032 22.4936C2.94172 24.9703 2.18091 25.7877 2.13235 25.9091C2.09188 26.0386 2.05141 26.2653 2.05141 26.419C2.05141 26.5728 2.09997 26.7994 2.16472 26.9209C2.22138 27.0504 2.37516 27.2365 2.50466 27.3498C2.63416 27.4631 2.88507 27.6088 3.06313 27.6655C3.33832 27.7545 3.43544 27.7464 3.71063 27.6331C3.92916 27.5441 4.5362 26.9937 5.62885 25.9091L7.23142 24.3147C10.0804 27.1475 10.5013 27.5198 10.7522 27.6007C11.0112 27.6817 11.1488 27.6817 11.4402 27.5926C11.6425 27.536 11.9015 27.3984 12.0148 27.277C12.1362 27.1637 12.2738 26.9047 12.3305 26.7023C12.4195 26.4109 12.4195 26.2734 12.3386 26.0144C12.2577 25.7634 11.8853 25.3426 10.647 24.088L9.05252 22.4936C12.1282 19.4098 12.3224 19.1751 12.371 18.8918C12.4033 18.7138 12.4033 18.4386 12.371 18.2848C12.3386 18.1229 12.1848 17.8801 12.0148 17.7101C11.8368 17.5321 11.6101 17.3864 11.4321 17.354C11.2702 17.3216 10.995 17.3216 10.8251 17.354C10.5499 17.4026 10.2828 17.6292 8.86636 19.0375L7.23142 20.6725C4.6657 18.1148 4.0101 17.5159 3.81585 17.435C3.64588 17.3702 3.42735 17.3136 3.33022 17.3136C3.22501 17.3136 2.99029 17.3864 2.80413 17.4754ZM17.033 18.7219C16.8792 18.7785 16.6688 18.9404 16.5635 19.0861C16.4664 19.2237 16.3531 19.4584 16.3288 19.596C16.3045 19.7417 16.3045 20.0007 16.3288 20.1626C16.3531 20.3487 16.4826 20.5915 16.6364 20.7615C16.7821 20.9153 17.033 21.0852 17.1868 21.1257C17.3648 21.1743 19.5663 21.1986 22.9495 21.1824C28.2752 21.1581 28.429 21.15 28.6475 20.9962C28.7608 20.9072 28.9389 20.7291 29.036 20.6077C29.1655 20.4297 29.206 20.2597 29.206 19.9036C29.206 19.5474 29.1655 19.3775 29.036 19.1994C28.9389 19.078 28.7608 18.8999 28.6475 18.8109C28.429 18.6571 28.2833 18.649 22.8686 18.6328C18.3846 18.6166 17.2515 18.6328 17.033 18.7219ZM17.033 23.9019C16.8792 23.9585 16.6688 24.1204 16.5635 24.2661C16.4664 24.4037 16.3531 24.6384 16.3288 24.776C16.3045 24.9217 16.3045 25.1807 16.3288 25.3426C16.3531 25.5287 16.4826 25.7715 16.6364 25.9415C16.7821 26.0953 17.033 26.2653 17.1868 26.3057C17.3648 26.3543 19.5663 26.3786 22.9495 26.3624C28.2752 26.3381 28.429 26.33 28.6475 26.1762C28.7608 26.0872 28.9389 25.9091 29.036 25.7877C29.1655 25.6097 29.206 25.4397 29.206 25.0836C29.206 24.7274 29.1655 24.5575 29.036 24.3794C28.9389 24.258 28.7608 24.0799 28.6475 23.9909C28.429 23.8371 28.2833 23.829 22.8686 23.8128C18.3846 23.7967 17.2515 23.8128 17.033 23.9019Z"
                fill="#D21513"
              />
            </svg>
          </Link>
          <Link
            href={
              getDomainRedirection(
                window.location.origin,
                floatD?.HomeFilpay.homeFilpayLink
              ) as string
            }
            target="_blank"
            className="flex h-14  w-14 items-center justify-center rounded-full border-[3px] border-[#D21513] bg-white"
          >
            <img src="/assets/pay-all.png" className="object-cover" />
          </Link>
          <div
            className="chat-with-us-body flex items-center gap-x-2 rounded-l-full bg-[#8D0F0E] pr-4 md:rounded-full"
            onClick={onClick}
          >
            <div className="flex h-14  w-14 items-center justify-center rounded-full border-[3px] border-[#D21513] bg-[#D21513]">
              <svg
                width="15"
                height="20"
                viewBox="0 0 15 20"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M7.61653 9.92327C10.1111 9.92327 12.1335 7.91132 12.1335 5.42942C12.1335 2.94752 10.1111 0.935547 7.61653 0.935547C5.1219 0.935547 3.09961 2.94752 3.09961 5.42942C3.09961 7.91132 5.1219 9.92327 7.61653 9.92327Z"
                  fill="white"
                />
                <path
                  d="M9.96892 11.7949H5.2638C2.53483 11.7949 0.276367 14.042 0.276367 16.7569C0.276367 17.4123 0.558672 17.9741 1.12329 18.2549C1.97021 18.723 3.85226 19.2846 7.61636 19.2846C11.3805 19.2846 13.2625 18.723 14.1094 18.2549C14.5799 17.9741 14.9563 17.4123 14.9563 16.7569C14.9563 13.9483 12.6979 11.7949 9.96892 11.7949Z"
                  fill="white"
                />
              </svg>
            </div>
            <div>
              <p className="font-quicksand text-[10px] text-white">
                Interested in a Property?
              </p>
              <p className="cursor-pointer font-quicksand text-[14px] text-white">
                Chat With Us Today
              </p>
            </div>
          </div>
          <Script
            type="text/javascript"
            async
            src="https://crm.zoho.com/crm/javascript/zcga.js"
          />
          <Zoho />
        </>
      )}
    </div>
  );
};

export default StickyButtons;
